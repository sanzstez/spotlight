/**
 * Spotlight.js v0.7.9.1
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';function d(a,b,c){a.classList[c?"add":"remove"](b)}function f(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(f(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&f(a,"transition","")}function h(a,b,c,e){k(!0,a,b,c,e)}function k(a,b,c,e,g){b[(a?"add":"remove")+"EventListener"](c,e,g||!1===g?g:!0)}function l(a,b){f(a,"display",b?"":"none")}function ca(a,b){f(a,"visibility",b?"":"hidden")}
function m(a,b){f(a,"transition",b?"":"none")};var n="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),da={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var p=document.createElement("div");p.id="spotlight";p.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var ea={},fa=document.createElement("video");function ha(a,b,c,e){if("node"!==e)for(var g=Object.keys(c),A=0,w;A<g.length;A++)if(w=g[A],3<w.length&&0===w.indexOf("src"))if("video"===e){var E=ea[w];if(E){if(0<E){var Da=c[w];break}}else if(fa.canPlayType("video/"+w.substring(3).replace("-","").toLowerCase())){ea[w]=1;Da=c[w];break}else ea[w]=-1}else if(E=parseInt(w.substring(4),10))if(E=Math.abs(b-E),!gb||E<gb){var gb=E;Da=c[w]}return Da||c.src||c.href||a.src||a.href};var q={},ia=navigator.connection,ja=window.devicePixelRatio||1,r,t,ka,la,u,ma,na,oa,v,pa,qa,ra,x,y,z,B,C,D,sa,ta,F,ua,va,wa,xa,ya,za,G,Aa,Ba,Ca,Ea,H,Fa,Ga,Ha,Ia,I,J,K,L,M,Ja=document.createElement("img"),N,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,O,Ua,P,Q,R,S,Va,T,Wa;
function Xa(){function a(c){return q[c]=(p||document).getElementsByClassName("spl-"+c)[0]}if(!J){J=document.body;N=a("scene");Ka=a("header");La=a("footer");Ma=a("title");Na=a("description");Oa=a("button");Pa=a("prev");Qa=a("next");Sa=a("page");O=a("progress");Ua=a("spinner");L=[a("pane")];U("close",Ya);J[T="requestFullscreen"]||J[T="msRequestFullscreen"]||J[T="webkitRequestFullscreen"]||J[T="mozRequestFullscreen"]||(T="");T?(Wa=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Ra=U("fullscreen",Za)):n.pop();U("autofit",V);U("zoom-in",$a);U("zoom-out",ab);U("theme",bb);Ta=U("play",W);U("download",cb);h(Pa,"click",db);h(Qa,"click",eb);var b=a("track");h(b,"mousedown",fb);h(b,"mousemove",hb);h(b,"mouseleave",ib);h(b,"mouseup",ib);h(b,"touchstart",fb,{passive:!1});h(b,"touchmove",hb,{passive:!0});h(b,"touchend",ib);h(Oa,"click",function(){Ea?Ea(z,D):Ca&&(location.href=Ca)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Ka.appendChild(c);return q[a]=c}function X(a,b){a=D[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}function jb(a){a?ba(M,jb):(m(N,Ia),f(M,"opacity",Ha?0:1),kb(Ga&&.8),I&&d(M,I,!0))}
function lb(a){K=L[a-1];M=K.firstChild;z=a;if(M)x&&V(),ya&&d(M,ya,!0),jb(!0),I&&d(M,I),Ha&&f(M,"opacity",1),Ga&&f(M,"transform",""),f(M,"visibility","visible"),Q&&(Ja.src=Q),G&&mb(R);else{var b=P.media,c=X("spinner",!0);if("video"===b)nb(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,ob(),nb(c),lb(a))},M.poster=D.poster,M.preload=Ba?"auto":"metadata",M.controls=X("controls",!0),M.autoplay=D.autoplay,M.h=X("inline"),
M.muted=X("muted"),M.src=P.src,K.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),ob(),K.appendChild(M),lb(a));return}nb(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,nb(c),lb(a),ob())};M.src=P.src;K.appendChild(M)}M&&(c||f(M,"visibility","visible"),M.onerror=function(){M===this&&(pb(M),d(Ua,"error",!0),nb(c))})}}function nb(a,b){a&&d(Ua,"spin",b)}
function qb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function rb(){sb();M&&ob();if(T){var a=qb();d(Ra,"on",a);a||l(Ra,0<screen.availHeight-window.innerHeight)}}function sb(){u=p.clientWidth;ma=p.clientHeight}function ob(){na=M.clientWidth;oa=M.clientHeight}function kb(a){f(M,"transform","translate(-50%, -50%) scale("+(a||v)+")")}function Y(a,b){f(K,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function tb(a,b,c){b?ba(N,function(){tb(a,!1,c)}):f(N,"transform","translateX("+(100*-a+(c||0))+"%)")}function ub(a){k(a,window,"keydown",vb);k(a,window,"wheel",wb);k(a,window,"resize",rb);k(a,window,"popstate",xb)}function xb(a){K&&a.state.spl&&Ya(!0)}function vb(a){if(K){var b=!1!==D["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:Ya();break;case 32:G&&W();break;case 37:db();break;case 39:eb();break;case 38:case 107:case 187:b&&$a();break;case 40:case 109:case 189:b&&ab()}}}
function wb(a){K&&!1!==D["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?ab():$a())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Ta,"on",R),b||mb(R))}function mb(a){ua&&(ba(O,function(){f(O,"transition-duration","");f(O,"transform","")}),a&&(f(O,"transition-duration",Fa+"s"),f(O,"transform","translateX(0)")));a&&(R=setTimeout(eb,1E3*Fa))}function Z(){za&&(Va=Date.now()+2950,S||(d(p,"menu",!0),yb(3E3)))}
function yb(a){S=setTimeout(function(){var b=Date.now();b>=Va?(d(p,"menu"),S=0):yb(Va-b)},a)}function zb(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(p,"menu")):Z()}function fb(a){var b=a;b.stopPropagation();b.preventDefault();pa=!0;qa=!1;(b=a.touches)&&(b=b[0])&&(a=b);ra=na*v<=u;ka=a.pageX;la=a.pageY;m(K)}
function ib(a){a.stopPropagation();if(pa){if(qa){if(ra&&qa){var b=(a=r<-(u/7)&&(z<B||F))||r>u/7&&(1<z||F);if(a||b)tb(z-1,!0,r/u*100),a&&eb()||b&&db();r=0;Y()}m(K,!0)}else zb();pa=!1}}function hb(a){a.stopPropagation();if(pa){var b=a.touches;b&&(b=b[0])&&(a=b);b=(na*v-u)/2;r-=ka-(ka=a.pageX);ra||(r>b?r=b:r<-b&&(r=-b),oa*v>ma&&(b=(oa*v-ma)/2,t-=la-(la=a.pageY),t>b?t=b:t<-b&&(t=-b)));qa=!0;Y(r,t)}else Z()}function Za(a){var b=qb();if("boolean"!==typeof a||a!==!!b)if(b)document[Wa]();else p[T]()}
function bb(a){"string"!==typeof a&&(a=y?"":Aa||"white");y!==a&&(y&&d(p,y),a&&d(p,a,!0),y=a)}function V(a){"boolean"===typeof a&&(x=!a);x=1===v&&!x;d(M,"autofit",x);f(M,"transform","");v=1;t=r=0;ob();m(K);Y()}function $a(){var a=v/.65;50>=a&&(x&&V(),r/=.65,t/=.65,Y(r,t),Ab(a))}function ab(){var a=.65*v;x&&V();1<=a&&(1===a?r=t=0:(r*=.65,t*=.65),Y(r,t),Ab(a))}function Ab(a){v=a||1;kb()}
function cb(){var a=J,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}function Ya(a){setTimeout(function(){J.removeChild(p);K=M=P=D=ta=C=va=wa=xa=Ea=null},200);d(J,"hide-scrollbars");d(p,"show");Za(!1);ub();history.go(!0===a?-1:-2);Q&&(Ja.src="");R&&W();M&&pb(M);S&&(S=clearTimeout(S));y&&bb();H&&d(p,H);xa&&xa()}
function pb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function db(a){a&&Z();if(1<B){if(1<z)return Bb(z-1);if(F)return tb(B,!0),Bb(B)}}function eb(a){a&&Z();if(1<B){if(z<B)return Bb(z+1);if(F)return tb(-1,!0),Bb(1);R&&W()}}function Bb(a){if(a!==z){R?(clearTimeout(R),mb()):Z();var b=a>z;z=a;Cb(b);return!0}}
function Db(a){var b=C[z-1],c=b;D={};ta&&Object.assign(D,ta);Object.assign(D,c.dataset||c);sa=D.media;Ea=D.onclick;Aa=D.theme;H=D["class"];za=X("autohide",!0);F=X("infinite");ua=X("progress",!0);G=X("autoslide");Ba=X("preload",!0);Ca=D.buttonHref;Fa=G&&parseFloat(G)||7;y||Aa&&bb(Aa);H&&d(p,H,!0);H&&ba(p);if(c=D.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<n.length;e++)D[n[e]]=!1;for(e=0;e<c.length;e++){var g=c[e].trim();"zoom"===g?D["zoom-in"]=D["zoom-out"]=!0:D[g]=!0}}c=D.animation;
Ga=Ha=Ia=!c;I=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)g=c[e].trim(),"scale"===g?Ga=!0:"fade"===g?Ha=!0:"slide"===g?Ia=!0:g&&(I=g);ya=D.fit;e=ia&&ia.downlink;c=Math.max(ma,u)*ja;e&&1200*e<c&&(c=1200*e);var A;P={media:sa,src:ha(b,c,D,sa),title:X("title",b.alt||b.title||(A=b.firstElementChild)&&(A.alt||A.title))};Q&&(Ja.src=Q="");Ba&&a&&(b=C[z])&&(a=b.dataset||b,(A=a.media)&&"image"!==A||(Q=ha(b,c,a,A)));for(b=0;b<n.length;b++)a=n[b],l(q[a],X(a,da[a]))}
function Cb(a){t=r=0;v=1;if(M)if(M.onerror)pb(M);else{var b=M;setTimeout(function(){b&&M!==b&&(pb(b),b=null)},650);jb();Y()}Db(a);tb(z-1);d(Ua,"error");lb(z);m(K);Y();a=P.title;var c=X("description"),e=X("button"),g=a||c||e;g&&(a&&(Ma.firstChild.nodeValue=a),c&&(Na.firstChild.nodeValue=c),e&&(Oa.firstChild.nodeValue=e),l(Ma,a),l(Na,c),l(Oa,e),f(La,"transform","all"===za?"":"none"));za||d(p,"menu",!0);ca(La,g);ca(Pa,F||1<z);ca(Qa,F||z<B);Sa.firstChild.nodeValue=1<B?z+" / "+B:"";wa&&wa(z,D)};window.Spotlight={init:Xa,theme:bb,fullscreen:Za,download:cb,autofit:V,next:eb,prev:db,goto:Bb,close:Ya,zoom:Ab,menu:zb,show:function(a,b,c){C=a;b&&(ta=b,va=b.onshow,wa=b.onchange,xa=b.onclose,c=c||b.index);a=c;if(B=C.length){J||Xa();va&&va(a);b=L[0];c=b.parentNode;for(var e=L.length;e<B;e++){var g=b.cloneNode(!1);f(g,"left",100*e+"%");c.appendChild(g);L[e]=g}K||(J.appendChild(p),sb());z=a||1;m(N);Cb(!0);T&&l(Ra,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},
"");m(p,!0);d(J,"hide-scrollbars",!0);d(p,"show",!0);ub(!0);sb();Z();G&&W(!0,!0)}},play:W,addControl:U,removeControl:function(a){var b=q[a];b&&(Ka.removeChild(b),q[a]=null)}};}).call(this);
