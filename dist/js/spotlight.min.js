/**
 * Spotlight.js v0.8.1
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';function d(a,b,c){a.classList[c?"add":"remove"](b)}function f(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(f(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&f(a,"transition","")}function ca(a,b,c){c=void 0===c?{}:c;(void 0===c.h?0:c.h)?a.innerHTML=b:a.innerText=b}function h(a,b,c,e){k(!0,a,b,c,e)}function k(a,b,c,e,g){b[(a?"add":"remove")+"EventListener"](c,e,g||!1===g?g:!0)}function l(a,b){f(a,"display",b?"":"none")}
function da(a,b){f(a,"visibility",b?"":"hidden")}function m(a,b){f(a,"transition",b?"":"none")};var n="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ea={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var p=document.createElement("div");p.id="spotlight";p.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var fa={},ha=document.createElement("video");function ia(a,b,c,e){if("node"!==e)for(var g=Object.keys(c),r=0,x;r<g.length;r++)if(x=g[r],3<x.length&&0===x.indexOf("src"))if("video"===e){var E=fa[x];if(E){if(0<E){var Ea=c[x];break}}else if(ha.canPlayType("video/"+x.substring(3).replace("-","").toLowerCase())){fa[x]=1;Ea=c[x];break}else fa[x]=-1}else if(E=parseInt(x.substring(4),10))if(E=Math.abs(b-E),!hb||E<hb){var hb=E;Ea=c[x]}return Ea||c.src||c.href||a.src||a.href};var q={},ja=navigator.connection,ka=window.devicePixelRatio||1,t,u,la,ma,v,na,oa,pa,w,qa,ra,sa,y,z,A,B,C,D,ta,ua,F,va,wa,xa,ya,za,Aa,G,Ba,Ca,Da,Fa,H,Ga,Ha,Ia,Ja,I,J,K,L,M,Ka=document.createElement("img"),N,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,O,Va,P,Q,R,S,Wa,T,Xa;
function Ya(){function a(c){return q[c]=(p||document).getElementsByClassName("spl-"+c)[0]}if(!J){J=document.body;N=a("scene");La=a("header");Ma=a("footer");Na=a("title");Oa=a("description");Pa=a("button");Qa=a("prev");Ra=a("next");Ta=a("page");O=a("progress");Va=a("spinner");L=[a("pane")];U("close",Za);J[T="requestFullscreen"]||J[T="msRequestFullscreen"]||J[T="webkitRequestFullscreen"]||J[T="mozRequestFullscreen"]||(T="");T?(Xa=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Sa=U("fullscreen",$a)):n.pop();U("autofit",V);U("zoom-in",ab);U("zoom-out",bb);U("theme",cb);Ua=U("play",W);U("download",db);h(Qa,"click",eb);h(Ra,"click",fb);var b=a("track");h(b,"mousedown",gb);h(b,"mousemove",ib);h(b,"mouseleave",jb);h(b,"mouseup",jb);h(b,"touchstart",gb,{passive:!1});h(b,"touchmove",ib,{passive:!0});h(b,"touchend",jb);h(Pa,"click",function(){Fa?Fa(A,D):Da&&(location.href=Da)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);La.appendChild(c);return q[a]=c}function X(a,b){a=D[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}function kb(a){a?ba(M,kb):(m(N,Ja),f(M,"opacity",Ia?0:1),lb(Ha&&.8),I&&d(M,I,!0))}
function mb(a){K=L[a-1];M=K.firstChild;A=a;if(M)y&&V(),za&&d(M,za,!0),kb(!0),I&&d(M,I),Ia&&f(M,"opacity",1),Ha&&f(M,"transform",""),f(M,"visibility","visible"),Q&&(Ka.src=Q),G&&nb(R);else{var b=P.media,c=X("spinner",!0);if("video"===b)ob(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,pb(),ob(c),mb(a))},M.poster=D.poster,M.preload=Ca?"auto":"metadata",M.controls=X("controls",!0),M.autoplay=D.autoplay,M.i=X("inline"),
M.muted=X("muted"),M.src=P.src,K.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),pb(),K.appendChild(M),mb(a));return}ob(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,ob(c),mb(a),pb())};M.src=P.src;K.appendChild(M)}M&&(c||f(M,"visibility","visible"),M.onerror=function(){M===this&&(qb(M),d(Va,"error",!0),ob(c))})}}function ob(a,b){a&&d(Va,"spin",b)}
function rb(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function sb(){tb();M&&pb();if(T){var a=rb();d(Sa,"on",a);a||l(Sa,0<screen.availHeight-window.innerHeight)}}function tb(){v=p.clientWidth;na=p.clientHeight}function pb(){oa=M.clientWidth;pa=M.clientHeight}function lb(a){f(M,"transform","translate(-50%, -50%) scale("+(a||w)+")")}function Y(a,b){f(K,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function ub(a,b,c){b?ba(N,function(){ub(a,!1,c)}):f(N,"transform","translateX("+(100*-a+(c||0))+"%)")}function vb(a){k(a,window,"keydown",wb);k(a,window,"wheel",xb);k(a,window,"resize",sb);k(a,window,"popstate",yb)}function yb(a){K&&a.state.spl&&Za(!0)}function wb(a){if(K){var b=!1!==D["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:Za();break;case 32:G&&W();break;case 37:eb();break;case 39:fb();break;case 38:case 107:case 187:b&&ab();break;case 40:case 109:case 189:b&&bb()}}}
function xb(a){K&&!1!==D["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?bb():ab())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Ua,"on",R),b||nb(R))}function nb(a){va&&(ba(O,function(){f(O,"transition-duration","");f(O,"transform","")}),a&&(f(O,"transition-duration",Ga+"s"),f(O,"transform","translateX(0)")));a&&(R=setTimeout(fb,1E3*Ga))}function Z(){Aa&&(Wa=Date.now()+2950,S||(d(p,"menu",!0),zb(3E3)))}
function zb(a){S=setTimeout(function(){var b=Date.now();b>=Wa?(d(p,"menu"),S=0):zb(Wa-b)},a)}function Ab(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(p,"menu")):Z()}function gb(a){var b=a;b.stopPropagation();b.preventDefault();qa=!0;ra=!1;(b=a.touches)&&(b=b[0])&&(a=b);sa=oa*w<=v;la=a.pageX;ma=a.pageY;m(K)}
function jb(a){a.stopPropagation();if(qa){if(ra){if(sa&&ra){var b=(a=t<-(v/7)&&(A<B||F))||t>v/7&&(1<A||F);if(a||b)ub(A-1,!0,t/v*100),a&&fb()||b&&eb();t=0;Y()}m(K,!0)}else Ab();qa=!1}}function ib(a){a.stopPropagation();if(qa){var b=a.touches;b&&(b=b[0])&&(a=b);b=(oa*w-v)/2;t-=la-(la=a.pageX);sa||(t>b?t=b:t<-b&&(t=-b),pa*w>na&&(b=(pa*w-na)/2,u-=ma-(ma=a.pageY),u>b?u=b:u<-b&&(u=-b)));ra=!0;Y(t,u)}else Z()}function $a(a){var b=rb();if("boolean"!==typeof a||a!==!!b)if(b)document[Xa]();else p[T]()}
function cb(a){"string"!==typeof a&&(a=z?"":Ba||"white");z!==a&&(z&&d(p,z),a&&d(p,a,!0),z=a)}function V(a){"boolean"===typeof a&&(y=!a);y=1===w&&!y;d(M,"autofit",y);f(M,"transform","");w=1;u=t=0;pb();m(K);Y()}function ab(){var a=w/.65;50>=a&&(y&&V(),t/=.65,u/=.65,Y(t,u),Bb(a))}function bb(){var a=.65*w;y&&V();1<=a&&(1===a?t=u=0:(t*=.65,u*=.65),Y(t,u),Bb(a))}function Bb(a){w=a||1;lb()}
function db(){var a=J,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}function Za(a){setTimeout(function(){J.removeChild(p);K=M=P=D=ua=C=wa=xa=ya=Fa=null},200);d(J,"hide-scrollbars");d(p,"show");$a(!1);vb();history.go(!0===a?-1:-2);Q&&(Ka.src="");R&&W();M&&qb(M);S&&(S=clearTimeout(S));z&&cb();H&&d(p,H);ya&&ya()}
function qb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function eb(a){a&&Z();if(1<B){if(1<A)return Cb(A-1);if(F)return ub(B,!0),Cb(B)}}function fb(a){a&&Z();if(1<B){if(A<B)return Cb(A+1);if(F)return ub(-1,!0),Cb(1);R&&W()}}function Cb(a){if(a!==A){R?(clearTimeout(R),nb()):Z();var b=a>A;A=a;Db(b);return!0}}
function Eb(a){var b=C[A-1],c=b;D={};ua&&Object.assign(D,ua);Object.assign(D,c.dataset||c);ta=D.media;Fa=D.onclick;Ba=D.theme;H=D["class"];Aa=X("autohide",!0);F=X("infinite");va=X("progress",!0);G=X("autoslide");Ca=X("preload",!0);Da=D.buttonHref;Ga=G&&parseFloat(G)||7;z||Ba&&cb(Ba);H&&d(p,H,!0);H&&ba(p);if(c=D.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<n.length;e++)D[n[e]]=!1;for(e=0;e<c.length;e++){var g=c[e].trim();"zoom"===g?D["zoom-in"]=D["zoom-out"]=!0:D[g]=!0}}c=D.animation;
Ha=Ia=Ja=!c;I=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)g=c[e].trim(),"scale"===g?Ha=!0:"fade"===g?Ia=!0:"slide"===g?Ja=!0:g&&(I=g);za=D.fit;e=ja&&ja.downlink;c=Math.max(na,v)*ka;e&&1200*e<c&&(c=1200*e);var r;P={media:ta,src:ia(b,c,D,ta),title:X("title",b.alt||b.title||(r=b.firstElementChild)&&(r.alt||r.title))};Q&&(Ka.src=Q="");Ca&&a&&(b=C[A])&&(a=b.dataset||b,(r=a.media)&&"image"!==r||(Q=ia(b,c,a,r)));for(b=0;b<n.length;b++)a=n[b],l(q[a],X(a,ea[a]))}
function Db(a){u=t=0;w=1;if(M)if(M.onerror)qb(M);else{var b=M;setTimeout(function(){b&&M!==b&&(qb(b),b=null)},650);kb();Y()}Eb(a);ub(A-1);d(Va,"error");mb(A);m(K);Y();a=P.title;var c=X("description"),e=X("button"),g=X("html"),r=a||c||e;r&&(a&&ca(Na,a,{h:g}),c&&ca(Oa,c,{h:g}),e&&ca(Pa,e,{h:g}),l(Na,a),l(Oa,c),l(Pa,e),f(Ma,"transform","all"===Aa?"":"none"));Aa||d(p,"menu",!0);da(Ma,r);da(Qa,F||1<A);da(Ra,F||A<B);ca(Ta,1<B?A+" / "+B:"");xa&&xa(A,D)};window.Spotlight={init:Ya,theme:cb,fullscreen:$a,download:db,autofit:V,next:fb,prev:eb,goto:Cb,close:Za,zoom:Bb,menu:Ab,show:function(a,b,c){C=a;b&&(ua=b,wa=b.onshow,xa=b.onchange,ya=b.onclose,c=c||b.index);a=c;if(B=C.length){J||Ya();wa&&wa(a);b=L[0];c=b.parentNode;for(var e=L.length;e<B;e++){var g=b.cloneNode(!1);f(g,"left",100*e+"%");c.appendChild(g);L[e]=g}K||(J.appendChild(p),tb());A=a||1;m(N);Db(!0);T&&l(Sa,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},
"");m(p,!0);d(J,"hide-scrollbars",!0);d(p,"show",!0);vb(!0);tb();Z();G&&W(!0,!0)}},play:W,addControl:U,removeControl:function(a){var b=q[a];b&&(La.removeChild(b),q[a]=null)}};}).call(this);
